class Solution {
    public ListNode sortList(ListNode head) {
        if(head == null || head.next==null)
            return head;
        ListNode slow = head;
        ListNode fast = head,prev = null;
        while(fast!=null && fast.next!=null){
            prev = slow;
            slow=slow.next;
            fast=fast.next.next;
        }
        prev.next = null;

        ListNode start = sortList(head);
        ListNode mid =sortList(slow);
        return merge(start,mid);
    }
    ListNode merge(ListNode first,ListNode second) {
            ListNode res = new ListNode(0),l=res;
            while(first!=null && second!=null){
                if(first.val <second.val){
                    l.next= first;
                    first = first.next;
                }
                else{
                    l.next= second;
                    second=second.next;
                }
                l=l.next;
            }
            if(first!=null)
                l.next = first;
            if(second!=null)
                l.next = second;
            return res.next;
        }
}
